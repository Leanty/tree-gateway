{"version":3,"sources":["../../src/lib/authentication/strategies/local.ts"],"names":["passport","require","passport_local_1","Utils","pathUtil","module","exports","apiKey","authConfig","settings","opts","omit","session","p","join","middlewarePath","verify","verifyFunction","use","Strategy"],"mappings":";;;;;;;;;AAEA,IAAYA,QAAA,GAAQC,OAAA,CAAM,UAAN,CAApB,C;;AACA,IAAAC,gBAAA,GAAAD,OAAA,CAAuB,gBAAvB,CAAA,C;;AAGA,IAAYE,KAAA,GAAKF,OAAA,CAAM,YAAN,CAAjB,C;;AACA,IAAYG,QAAA,GAAQH,OAAA,CAAM,MAAN,CAApB,C;;AAEAI,MAAA,CAAOC,OAAP,GAAiB,UAAUC,MAAV,EAA0BC,UAA1B,EAAkEC,QAAlE,EAAoF;AAAA,I,sCAAA;AAAA,I,sCAAA;AAAA,IACjG,IAAIC,IAAA,GAAOP,KAAA,CAAMQ,IAAN,CAAWH,UAAX,EAAuB,QAAvB,CAAX,CADiG;AAAA,I,sCAAA;AAAA,IAEjGE,IAAA,CAAKE,OAAL,GAAe,KAAf,CAFiG;AAAA,I,sCAAA;AAAA,IAGjG,IAAIC,CAAA,GAAIT,QAAA,CAASU,IAAT,CAAcL,QAAA,CAASM,cAAvB,EAAuC,gBAAvC,EAAyD,QAAzD,EAAmEP,UAAA,CAAWQ,MAA9E,CAAR,CAHiG;AAAA,I,sCAAA;AAAA,IAIjG,IAAIC,cAAA,GAAiBhB,OAAA,CAAQY,CAAR,CAArB,CAJiG;AAAA,I,uCAAA;AAAA,IAKjGb,QAAA,CAASkB,GAAT,CAAaX,MAAb,EAAqB,IAAIL,gBAAA,CAAAiB,QAAJ,CAAaT,IAAb,EAAmBO,cAAnB,CAArB,EALiG;AAAA,CAArG","file":"local.js","sourcesContent":["\"use strict\";\n\nimport * as passport from 'passport';\nimport {Strategy} from 'passport-local';\nimport * as config from \"../../config\";\nimport {Settings} from \"../../settings\";\nimport * as Utils from \"underscore\";\nimport * as pathUtil from \"path\"; \n\nmodule.exports = function (apiKey: string, authConfig: config.LocalAuthentication, settings: Settings) {\n    let opts = Utils.omit(authConfig, \"verify\");\n    opts.session = false;\n    let p = pathUtil.join(settings.middlewarePath, 'authentication', 'verify', authConfig.verify);                \n    let verifyFunction = require(p);\n    passport.use(apiKey, new Strategy(opts, verifyFunction));\n};\n"]}