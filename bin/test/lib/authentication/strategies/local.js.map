{"version":3,"sources":["../../src/lib/authentication/strategies/local.ts"],"names":["passport","require","passport_local_1","Utils","pathUtil","module","exports","apiKey","authConfig","gateway","opts","omit","session","p","join","middlewarePath","verify","verifyFunction","use","Strategy"],"mappings":";;;;;;;;;AAEA,IAAYA,QAAA,GAAQC,OAAA,CAAM,UAAN,CAApB,C;;AACA,IAAAC,gBAAA,GAAAD,OAAA,CAAuB,gBAAvB,CAAA,C;;AAGA,IAAYE,KAAA,GAAKF,OAAA,CAAM,YAAN,CAAjB,C;;AACA,IAAYG,QAAA,GAAQH,OAAA,CAAM,MAAN,CAApB,C;;AAEAI,MAAA,CAAOC,OAAP,GAAiB,UAAUC,MAAV,EAA0BC,UAA1B,EAA2DC,OAA3D,EAA2E;AAAA,I,sCAAA;AAAA,I,sCAAA;AAAA,IACxF,IAAIC,IAAA,GAAOP,KAAA,CAAMQ,IAAN,CAAWH,UAAX,EAAuB,QAAvB,CAAX,CADwF;AAAA,I,sCAAA;AAAA,IAExFE,IAAA,CAAKE,OAAL,GAAe,KAAf,CAFwF;AAAA,I,sCAAA;AAAA,IAGxF,IAAIC,CAAA,GAAIT,QAAA,CAASU,IAAT,CAAcL,OAAA,CAAQM,cAAtB,EAAsC,gBAAtC,EAAwD,QAAxD,EAAkEP,UAAA,CAAWQ,MAA7E,CAAR,CAHwF;AAAA,I,sCAAA;AAAA,IAIxF,IAAIC,cAAA,GAAiBhB,OAAA,CAAQY,CAAR,CAArB,CAJwF;AAAA,I,uCAAA;AAAA,IAKxFb,QAAA,CAASkB,GAAT,CAAaX,MAAb,EAAqB,IAAIL,gBAAA,CAAAiB,QAAJ,CAAaT,IAAb,EAAmBO,cAAnB,CAArB,EALwF;AAAA,CAA5F","file":"local.js","sourcesContent":["\"use strict\";\n\nimport * as passport from 'passport';\nimport {Strategy} from 'passport-local';\nimport {Gateway} from \"../../gateway\"; \nimport {LocalAuthentication} from \"../../config/authentication\";\nimport * as Utils from \"underscore\";\nimport * as pathUtil from \"path\"; \n\nmodule.exports = function (apiKey: string, authConfig: LocalAuthentication, gateway: Gateway) {\n    let opts = Utils.omit(authConfig, \"verify\");\n    opts.session = false;\n    let p = pathUtil.join(gateway.middlewarePath, 'authentication', 'verify', authConfig.verify);                \n    let verifyFunction = require(p);\n    passport.use(apiKey, new Strategy(opts, verifyFunction));\n};\n"]}