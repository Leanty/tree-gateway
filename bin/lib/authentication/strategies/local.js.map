{"version":3,"sources":["../../src/lib/authentication/strategies/local.ts"],"names":[],"mappings":"AAAA,YAAY,CAAC;AAEb,IAAY,QAAQ,WAAM,UAAU,CAAC,CAAA;AACrC,+BAAuB,gBAAgB,CAAC,CAAA;AAGxC,IAAY,KAAK,WAAM,YAAY,CAAC,CAAA;AACpC,IAAY,QAAQ,WAAM,MAAM,CAAC,CAAA;AAEjC,MAAM,CAAC,OAAO,GAAG,UAAU,MAAc,EAAE,UAA+B,EAAE,OAAgB;IACxF,IAAI,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC,UAAU,EAAE,QAAQ,CAAC,CAAC;IAC5C,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;IACrB,IAAI,CAAC,GAAG,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,cAAc,EAAE,gBAAgB,EAAE,QAAQ,EAAE,UAAU,CAAC,MAAM,CAAC,CAAC;IAC7F,IAAI,cAAc,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;IAChC,QAAQ,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,yBAAQ,CAAC,IAAI,EAAE,cAAc,CAAC,CAAC,CAAC;AAC7D,CAAC,CAAC","file":"local.js","sourcesContent":["\"use strict\";\n\nimport * as passport from 'passport';\nimport {Strategy} from 'passport-local';\nimport {Gateway} from \"../../gateway\"; \nimport {LocalAuthentication} from \"../../config/authentication\";\nimport * as Utils from \"underscore\";\nimport * as pathUtil from \"path\"; \n\nmodule.exports = function (apiKey: string, authConfig: LocalAuthentication, gateway: Gateway) {\n    let opts = Utils.omit(authConfig, \"verify\");\n    opts.session = false;\n    let p = pathUtil.join(gateway.middlewarePath, 'authentication', 'verify', authConfig.verify);                \n    let verifyFunction = require(p);\n    passport.use(apiKey, new Strategy(opts, verifyFunction));\n};\n"]}